{% extends 'base2.html' %}
{% load staticfiles%}
{% block content %}
<style> 
.testdiv
{
/*padding:10px 40px; */
background:#dddddd;
width: :700px;
}
.divcontent{
  padding-left: 50px;
}
.maincontent{
  padding-right: 50px;
}
.divpad{
    padding-top: 7.5px;
}
.editicons{
  padding-top: 12px;
}

</style>
{% if not can_edit %}
<div class="row-fluid maincontent">
  <div class="span1">
    <label>a5tebar</label>
    </div>
<div class="testdiv span4">
       <img style="" src="{% static "img/post.png" %}" alt="{{post.id}}" />
</div>    
<div class="testdiv span6">
  <div class="row-fluid">
    <div class="span4">
      <div class="divpad">
      <label>Title:</label>
      </div>
      <div class="divpad">
      <label>Description:</label>
      </div>
      <div class="divpad">
      <label>Price:</label>
      </div>
      <div class="divpad">
      <label>Location:</label>
        </div>
     {% for Attribute in list_of_attribute_name%}
    <div class="divpad">
    <label id="{{Attribute.id}}">{{Attribute.name}}</label>
    </div>
    {% endfor %} 
    </div>
    <div class="span8 divcontent">
      <div class="divpad">
        <label id="title1">{{post.title}}</label></label> 
    <input id="title1value" style="display:none">
    </div>
        <div class="divpad">
    <label id="description">{{post.description}}</label>
    <input id="descriptionvalue" style="display:none">
        </div>
        <div class="divpad">
    <label id="price">{{post.price}}</label>
    <input id="pricevalue" style="display:none">
    </div>
    <div class="divpad">
        <label id="location">{{post.location}}</label>
    <input id="locationvalue" style="display:none">
        </div>
   <!--  {% for Value in list_of_attribute_values%}
        <div class="divpad">
        <label id="{{Value.id}}">{{Value.value}}</label>
        <input id="value_{{Value.value}}" style="display:none">
        </div>
        {% endfor %} -->

    </div>
  {% endif %}

  {% if can_edit %}
  <div class="row-fluid maincontent">
  <div class="span1">
    <label>a5tebar</label>
    </div>
<div class="testdiv span4">
       <img style="" src="{% static "img/post.png" %}" alt="{{post.id}}" />
</div>    
<div class="testdiv span6">
  <div class="row-fluid">
    <div class="span2">
      <div class="divpad">
      <label>Title:</label>
      </div>
      <div class="divpad">
      <label>Description:</label>
      </div>
      <div class="divpad">
      <label>Price:</label>
      </div>
      <div class="divpad">
      <label>Location:</label>
        </div>
  {% for Attribute in list_of_attribute_name%}
    <div class="divpad">
    <label id="attributelabel_{{Attribute.id}}">{{Attribute.name}}</label>
    </div>
    {% endfor %} 
    </div>
    <div class="span6 divcontent">
      <div class="divpad">
        <label id="title1">{{post.title}}</label></label> 
    <input id="title1value" style="display:none">
    </div>
        <div class="divpad">
    <label id="description">{{post.description}}</label>
    <input id="descriptionvalue" style="display:none">
        </div>
        <div class="divpad">
    <label id="price">{{post.price}}</label>
    <input id="pricevalue" style="display:none">
    </div>
    <div class="divpad">
        <label id="location">{{post.location}}</label>
    <input id="locationvalue" style="display:none">
        </div>
         {% for Value in list_of_attribute_values%}
        <div class="divpad">
        <label id="value_{{Value.attribute.id}}">{{Value.value}}</label>
        <input id="attribute_value_{{Value.attribute.id}}" style="display:none">
        </div>
        {% endfor %} 
 
    </div>
    <div class="span2" >

  <label class="editicons"><i class="icon-edit" id="edit_title" onClick="update_title_preparation()"></i>
 <i class="icon-ok " style="display:none" onClick="update_title({{post.id}})" id="titlesave"></i></label>

   <label class="editicons"> <i class="icon-edit" id="edit_description" onClick="update_description_preparation()"></i>
    <i class="icon-ok" style="display:none" onClick="update_description({{post.id}})" id="descriptionsave"></i></label>
<label class= "editicons">
    <i class="icon-edit" id="edit_price" onClick="update_price_preparation()"></i>
    <i class="icon-ok" style="display:none" onClick="update_price({{post.id}})" id="pricesave"></i>
    </label>
    <label class="editicons">
    <i class="icon-edit" id="edit_location" onClick="update_location_preparation()"></i>
    <i class="icon-ok" style="display:none" onClick="update_location({{post.id}})" id="locationsave"></i>
    </label>
    {% for Attribute in no %}
    <label class="editicons">
    <i class="icon-edit" id="edit_attribute_button_{{Attribute.id}}" onClick="update_attribute_preparation({{Attribute.id}})"></i>

    <i class="icon-ok" style="display:none" id="save_attribute_button_{{Attribute.id}}" onClick="update_attribute({{Attribute.id}},{{post.id}})" ></i>
   </label>
    {% endfor %}
    {% endif %}
  </div>
  </div>
<div>
<label id="testasd1">testing l 5ra</label>
</div>
</div>
<div class="span1">
  <label>{{can_edit}}</label>
  <label>{{post.seller.id}}</label>

</div>
</div>





  </div>


 
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Report A Post</h3>
    <p>
      Please provide us with your reason for reporting this post:
    </p>
  </div>
  <div class="modal-body">
      {% for reasons in report_reasons %}
  <label class="R{{reasons.id}}">
      <input type="radio" name="optionsRadios{{post.id}}" id="optionsRadios{{post.id}}" value="{{reasons.reported_reason}}" checked>
        {{reasons.reported_reason}}
  </label>
  {% endfor %}
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <button class="btn btn-primary" id = "postID" onCLick ="reportPost({{post.id}});">Submit Report</button>
  </div>
</div>
</div>



<div id="myModal2" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Buyers Interested in Your Post:</h3>
    
  </div>
  <div class="modal-body">
      {% for buyers in list_of_interested_buyers %}
        {{ buyers }}
    {% endfor %}  
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Back</button>
  </div>
</div>
</div>




</div>
</div>
</div>
{% block script%}

    <script type="text/javascript">
    var eligible_to_add_to_the_wish_list = {{canwish}}
    $("#wishlisterror").hide();
    if(eligible_to_add_to_the_wish_list){
      $('#wishlist').removeAttr("disabled");
    }
    function add_to_list(){
      $.ajax({
    url: '/addtomylist',
    type: "POST",
    data: {
        "post" : {{post.id}},
    }, 
    success: function(result) {
      $('#wishlist').attr("disabled", true);
    alert("Successfully added to your wish list")
    },

    });
    }

function update_title_preparation() {
    $("#edit_title").hide();
    $('#title1').hide();
    var title = $('#title1').text();
    $('#title1value').val(title);
    $('#title1value').css('display', 'block');
    $('#titlesave').css('display', 'block');
   
}    
function update_description_preparation(){    
    $("#edit_description").hide();
    $('#description').hide();
    var description = $('#description').text();
    $('#descriptionvalue').val(description);
    $('#descriptionvalue').css('display', 'block');
    $('#descriptionsave').css('display', 'block');
}    
function update_location_preparation(){
    $("#edit_location").hide();
    $('#location').hide();
    var location = $('#location').text();
    $("#locationvalue").val (location);
    $('#locationvalue').css('display', 'block');
     $('#locationsave').css('display', 'block');
}
function update_price_preparation(){
    $("#edit_price").hide();
    $('#price').hide();
    var price = $('#price').text();
    $('#pricevalue').val(price);
    $('#pricevalue').css('display', 'block');
     $('#pricesave').css('display', 'block');
}
function update_attribute_preparation(id){
    var current_attribute_value = $('#value_'+id).text();
    $('#value_'+id).hide();
    $('#attribute_value_'+id).val(current_attribute_value);
    $('#attribute_value_'+id).css('display', 'block');
    $('#edit_attribute_button_'+id).css('display', 'none');
    $('#save_attribute_button_'+id).css('display', 'block');
}


    function update_title(id){
    
    var title = $('#title1value').val();
    $.ajax({
    url: "/editposttitle/",
    type: "POST",
    data: {
        "post" : id,
        "title": title,
    }, 
    success: function(result) {
    alert("Successfully updated")
    $('#title1').text($('#title1value').val());
    $('#title1').show();
    $('#title1value').hide();
    $('#titlesave').hide();
    $('#edit_title').show();
    },
    });
}


function update_description(id){
   var description = $('#descriptionvalue').val();    
    $.ajax({
    url: "/editpostdescription/",
    type: "POST",
    data: {
        "post" : id,
        "description": description,
    }, 
    success: function(result) {

    alert("Successfully updated")
    $('#description').text($('#descriptionvalue').val());
    $('#description').show();
    $('#descriptionvalue').hide();
    $('#descriptionsave').hide();
    $('#edit_description').show();
    },

    });
}
function update_price(id){
   var price = $('#pricevalue').val();        
    $.ajax({
    url: "/editpostprice/",
    type: "POST",
    data: {
        "post" : id,
        "price":price,
    }, 
    success: function(result) {

    alert("Successfully updated")
    $('#price').text($('#pricevalue').val());
    $('#price').show();
    $('#pricevalue').hide();
    $('#pricesave').hide();
    $('#edit_price').show();
    },

    });
}

function update_location(id){
   var location = $('#locationvalue').val();        
    $.ajax({
    url: "/editpostlocation/",
    type: "POST",
    data: {
        "post" : id,
        "location":location,
    }, 
    success: function(result) {

    alert("Successfully updated")
    $('#location').text($('#locationvalue').val());
    $('#location').show();
    $('#locationvalue').hide();
    $('#locationsave').hide();
    $('#edit_location').show();
    },

    });
}

    </script>

    

    


{% endblock %}


{% endblock %}