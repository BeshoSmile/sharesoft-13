{% extends 'base.html'%}

{% block headers %}
{% load staticfiles %}
    {% include 'jquery_raty_min_js.html' %}
    <link href="{% static "css/application.css" %}" rel="stylesheet" media="screen">
    
{% endblock %}

{% block content%}
<title> Welcome to the post page </title>
<div class="container-fluid">
    <div class="row-fluid">
		    <div  class="span6">
		    	<div id="imagediv" >		
		    		 <img style="width: 300px;" src="static/img/post.png">
			</div>
			</div>
    		<div id = "contentdiv"class="span4" position="right">
	
				<h3> Title: {{post.title}}</h3>

				<h3> Description: {{post.description}}</h3>

				<h3> Price: {{post.price}}</h3>

				<h3> State: {{post.state}} </h3>


				{% if list_of_att_name %}

					{% for Attribute in list_of_att_name %}

					<h3>{{Attribute.name}}</h3>

					{% endfor %}
				{% endif %}

				{% if list_of_att_values %}

					{% for Value in list_of_att_values %}

					<h3>{{Value.value}}</h3>

					{% endfor %}

				{% endif %}  
				{% if add_buyer_button %}
					<button class="btn btn-mini btn-danger" id="addBuyer" value="{{post.id}}" type="button">Add Buyer</button>
				{% endif %}

    
    
    			{% if view_rating %}
    				<button class="btn btn-mini btn-primary" id="rateSeller" value="{{post.seller.id}}" type="button">Rate Seller</button>
    			{% endif %}
    			<div id="star"></div>
    
				<button type="button" class="btn btn-info"> fb </button>
				<button id = "report_button{{post.id}}" onCLick= "report({{post.id}});">Report</button>
				<button id = "get_interested_in{{post.id}}" onCLick= "get_interested({{post.id}});">Show Interested</button>
				<button type="button" class="btn btn-info"> Interested in </button>
	 		</div>
 	</div>
<div id = "listOfBuyers{{post.id}}" style="display:none">
	{% for buyer in list_of_interested_buyers %}
		<h3>{{ buyer }}</h3>
	{% endfor %}
</div>

<!-- <div class = "reportDIV" style="visibility:hidden"> -->
<div class = "reportDIV{{ post.id }}" style="display:none">

<form class="reportForm" name="input" action="" method="POST">
{% csrf_token %}

<div class="reportReasons">	
	{% for reasons in report_reasons %}
	<label class="R{{reasons.id}}">
  		<input type="radio" name="optionsRadios{{post.id}}" id="optionsRadios{{post.id}}" value="{{reasons.reported_reason}}" checked>
  			{{reasons.reported_reason}}
	</label>
	{% endfor %}

</div>
<button id = "postID" onCLick ="reportPost({{post.id}});" type="button">Submit Report</button>
</form> 
<button onClick = "cancelReport({{post.id}});">Cancel Report</button>
</div>
</div>
{% block script%}

    <script type="text/javascript">

    $(document).ready(function(){
        $("#star").css("visibility", "hidden");
    });
    $("#rateSeller").click(function(){
        // window.location.replace("profile?user_id="+$(this).val());
        $("#star").css("visibility", "visible");
    });
    $(document).ready(function(){
        $('#star').raty({ 
            score: $('#rating').val(),
            click: function(score, evt) {
            //alert('ID: ' + $(this).attr('id') + "\nscore: " + score + "\nevent: " + evt);
            $.ajax({
                type: 'GET',
                url: '/rateUser/',
                data: { post_id: '{{post.id}}', post_owner: '{{post.seller.id}}', rating: score },
                success: function(){  
                    $('#div.success').css("visibility", "hidden");  
                }


                         });

        },

    });
});
    </script>
    {% endblock %}


{% endblock %}
