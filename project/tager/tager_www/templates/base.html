{% extends "base2.html" %}
{% load staticfiles %}
{% block nav %}

{% if request.user.is_authenticated %}
 <div class="nav-collapse collapse">
            <ul class="nav">
              <ul class="nav pull-right">
              <li><a href="/main" style="margin-top:3px;">Home</a></li>
              <!-- <li><a href="#contact" style="margin-top:3px;">Contact</a></li> -->
              <div id="to_be_replaced" style="float:left; margin-left:5px; margin-top: 13px;">
                <div id="notifications_div">
                  <a id="notifications_dropdown" data-toggle="dropdown"><img src="/static/img/notifications-logoo.png" width="25" height="22"/></a>
                  <ul  id="notifications" class="dropdown-menu"  style="margin-left:-50px; background-color:white" size="7">
                    <ul id="notifications_menu" style="list-style:none;" width="200">
                      {% if all_unread_notifications %}
                        {% for notification in all_unread_notifications %}
                          <a href="../{{notification.url}}" style="white-space:normal; display:block; background-color:#08c border-bottom:solid thick">
                          <li class="to_be_shaded" style="margin-right:20px; border-bottom:solid thin black;">
                            <span>
                                {% if notification.image_url %}
                                    <img style="width: 50px; height:50px;" src="{{notification.image_url}}"/>
                                    <span style="color:black; font-size:13px">{{notification.content}}</span>
                                {% else %}
                                    <img src="{% static "img/post.png" %}" width="50" height="50"/>
                                    <span style="color:black; font-size:13px">{{notification.content}}</span>
                                {% endif %}
                            </span>
                          </li>
                        </a>
                        {% endfor %}
                        <li class="to_be_shaded"style="padding-left:100px;"><a style="color:black" href="../notifications">see all</a></li>
                      {% else %}
                        <li class="to_be_shaded" style="padding-left:20px;"><a style="color:black; display:block" href="../notifications">see all</a></li>
                      {% endif %}
                      </ul>
                    </ul>
                  <script type="text/javascript">
                    $(document).ready(function(){
                      
                      $("#notifications_dropdown").click(function() {
                        $.ajax({
                          url: "/refresh_notifications/",
                          type: "GET",
                          success: function(req) {
                            $('#notifications_menu').replaceWith($(req).find('#notifications_menu'));
                          }
                        });
                      });
                    });
                  </script>
                  <style type="text/css">
                    #notifications_div:hover{
                        cursor: pointer;
                    }
                    .to_be_shaded:hover{
                        background-color: #c9dbf1 !important;
                    }
                  </style>
                </div>
              </div>
              <li>
                <div>
                  <form class="navbar-search pull-left" style="margin-left:180px; margin-top:13px;" action="/search/" method="get">
                    <input type="text" class="search-query" placeholder="Search">
                  </form>
                </div>
              </li>
              <li><a href="../advanced_search/channel" style="margin-top:3px;">Advanced Search</a></li>
              <li><a href="/profile?user_id={{request.user.id}}" style="margin-top:3px; margin-left:210px; float:right">{{request.user.name}}</a></li>

              <li class="dropdown">

         

                <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="float:inline"><img src="/static/img/settings-icon.png" width="25" height="25"></a>
                <ul class="dropdown-menu">
                  <li><a href="/subscribe">Subscribe</a></li>
                  <li><a href="#" id="editing">Manage and edit profile</a></li>
                  <!-- <li><a href="#">Another action</a></li> -->
                  <!-- <li><a href="#">Something else here</a></li> -->
                  <li class="divider"></li>
                  <li><a href="/logout/">Logout</a></li>
                  

                </ul>
              </li>

              </ul>
            </ul>
          </div>
        {% else %}

        <div class="nav-collapse collapse">
            <ul class="nav">
              <ul class="nav pull-right">
              <li><a href="/main" style="margin-top:3px;">Home</a></li>
              
              <li>
                <div>
                  <form class="navbar-search pull-left" style="margin-top:13px; margin-left:260px" action="/search/" method="get">
                    <input type="text" class="search-query" placeholder="Search">
                  </form>
                </div>
              </li>
              <li><a href="../advanced_search/channel/" style="margin-top:3px;">Advanced Search</a></li>
              <li><a href="/login/" style="margin-top:3px; margin-left:260px; float:right">login</a></li>

              


              </ul>
            </ul>
          </div>

        {% endif %}

{% endblock %}


 
